[Unit]
Description=Idle manager (swayidle) for Niri ONLY
BindsTo=graphical-session.target
After=graphical-session.target
# --- THIS IS THE FIX ---
# Only start this service if the environment variable
# XDG_CURRENT_DESKTOP is exactly "niri"
ConditionEnvironment=XDG_CURRENT_DESKTOP=niri

[Service]
Type=simple
ExecStart=/home/zen/niribin/niri-swayidle
Restart=on-failure
RestartSec=1

[Install]
WantedBy=graphical-session.target
